;
; ADC_Free_Running_Mode.asm
;
; Created: 10/3/2023 2:07:31 PM
; Author : Options
;


; Replace with your application code
.INCLUDE "m32def.inc"

.ORG 0x00
JMP MAIN

.ORG 0x20
JMP ADC_ISR

.ORG 0x50
MAIN:
LDI R16,HIGH(RAMEND)
OUT SPH,R16
LDI R16,LOW(RAMEND)
OUT SPL,R16

LDI R16,0xFF
OUT DDRC,R16
OUT DDRD,R16
CBI DDRA,PA0

LDI R16,0x40
OUT ADMUX,R16
LDI R16,0x00
OUT SFIOR,R16
LDI R16,0xAE
OUT ADCSRA,R16
SEI
SBI ADCSRA,ADSC
LOOP: RJMP LOOP

ADC_ISR:
IN R16,ADCL
OUT PORTC,R16
IN R16,ADCH
OUT PORTD,R16
RETI
