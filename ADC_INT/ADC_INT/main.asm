;
; ADC_INT.asm
;
; Created: 9/27/2023 9:27:27 AM
; Author : Options
;


; Replace with your application code
.INCLUDE "m32def.inc"

.ORG 0x00
JMP MAIN

.ORG 0x20
JMP ADC_ISR

.ORG 0x100
MAIN:
LDI R16,HIGH(RAMEND)
OUT SPH,R16
LDI R16,LOW(RAMEND)
OUT SPL,R16

LDI R16,0xFF
OUT DDRC,R16
OUT DDRD,R16
CBI DDRA,PA0

LDI R16,0x40
OUT ADMUX,R16
LDI R16,0x8F
OUT ADCSRA,R16
SEI
LOOP:
SBI ADCSRA,ADSC
RJMP LOOP

.ORG 0x200
ADC_ISR:
IN R16,ADCL
OUT PORTC,R16
IN R16,ADCH
OUT PORTD,R16
RETI
